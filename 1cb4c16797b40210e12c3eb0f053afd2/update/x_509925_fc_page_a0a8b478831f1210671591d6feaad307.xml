<?xml version="1.0" encoding="UTF-8"?><record_update table="x_509925_fc_page">
    <x_509925_fc_page action="INSERT_OR_UPDATE">
        <active>true</active>
        <add_to_menu>false</add_to_menu>
        <attributes><![CDATA[(function (params) {

	function initialize() {
		var model = {
			condition: true
		};

        var incidentGr = new GlideRecord('incident');
        incidentGr.addEncodedQuery('active=true');
        incidentGr.setLimit(1);
        incidentGr.query();
        incidentGr.next();

        model.incident = {
            sys_id: incidentGr.getUniqueValue(),
            number: incidentGr.getValue('number'),
            short_description: incidentGr.getValue('short_description'),
        }

		return model;
	}

    function closeIncident(incidentId){
        var incidentGr = new GlideRecord('incident');
        incidentGr.get(incidentId)

        incidentGr.setValue('state',8);
        incidentGr.update();
    }


	return {
		initialize: initialize,
        closeIncident: closeIncident
	};

})(params);]]></attributes>
        <base>false</base>
        <client_scripts><![CDATA[function execute(helpers){
    async function closeIncident(incidentId){
        
        await helpers.service.call('closeIncident', [incidentId]);
        helpers.service.snackbar("Incident closed successfully!");
    
    }

    function getPageSize(){
        return 15;
    }

    return {
        closeIncident: closeIncident,
        getPageSize: getPageSize
    };
}]]></client_scripts>
        <css/>
        <is_homepage>false</is_homepage>
        <is_page_template>false</is_page_template>
        <route>active_incidents</route>
        <sys_class_name>x_509925_fc_page</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-01-22 02:05:46</sys_created_on>
        <sys_id>a0a8b478831f1210671591d6feaad307</sys_id>
        <sys_mod_count>37</sys_mod_count>
        <sys_name/>
        <sys_package display_value="FC" source="x_509925_fc">1cb4c16797b40210e12c3eb0f053afd2</sys_package>
        <sys_policy/>
        <sys_scope display_value="FC">1cb4c16797b40210e12c3eb0f053afd2</sys_scope>
        <sys_update_name>x_509925_fc_page_a0a8b478831f1210671591d6feaad307</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-01-22 23:47:02</sys_updated_on>
        <template>[{"id":"vpf1ii","title":"Liquid","description":"Liquid","type":"liquid","css_classes":{"value":[],"options":[]},"css_styles":{"value":[]},"allowable_children":[],"children":[],"content":"","parent_id":"","config":{"content":"&lt;div class=\"container main-container mt-5\"&gt;\r\n\t&lt;div class=\"row\"&gt;\r\n\t\t&lt;div class=\"col p-3\"&gt;\r\n\t\t\t&lt;div&gt;\r\n\t\t\t\t&lt;span x-text=\"$scope.model.incident.number\"&gt;&lt;/span&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t\t&lt;div&gt;\r\n\t\t\t\t&lt;span x-text=\"$scope.model.incident.short_description\"&gt;&lt;/span&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t\t&lt;div&gt;\r\n\t\t\t\t&lt;mdui-button @click=\"$scope.closeIncident($scope.model.incident.sys_id)\" variant=\"filled\"&gt;\r\n                    Close Incident\r\n\t\t\t\t&lt;/mdui-button&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/div&gt;\r\n\t&lt;/div&gt;\r\n\t&lt;div class=\"row\"&gt;\r\n\t\t&lt;div class=\"col\"&gt;\r\n\t\t\t&lt;fc-widget widget-id=\"priority_incident_widget\" :has-options=\"true\"\r\n\t\t\t\t:options='JSON.stringify({ page_size: $scope.getPageSize()})'&gt;\r\n\t\t\t&lt;/fc-widget&gt;\r\n\t\t&lt;/div&gt;\r\n\t&lt;/div&gt;\r\n&lt;/div&gt;","css_classes":"","css_styles":"","form_id":"","task_id":"","target_id":"","type":"static","name":"","grid_xs":"","grid_sm":"","grid_md":"","grid_lg":"","grid_xl":"","header_tag":"h2","img_src":"","img_width":"","img_height":"","widget_id":"","options":"{}","container":""},"config_options":{}}]</template>
        <title>Active Incidents</title>
        <type>page</type>
    </x_509925_fc_page>
</record_update>
